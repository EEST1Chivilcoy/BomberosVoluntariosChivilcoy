@inject NavigationManager navigationManager
@inject IDbContextFactory<BomberosDbContext> DbFactory
@using Microsoft.AspNetCore.Components.Forms
@using Microsoft.AspNetCore.Components
@page "/bomberos/agregar"
<style>
    #crear-bombero {
        background-color: #C43A3A;
        color: white;
        font-size: 20px;
        font-family: calibri light;
        border: 0px;
        border-radius: 8px;
    }

    #blancoA {
        width: 100%;
        padding: 15px;
    }

    #estilo {
        border: 1px;
        border-radius: 8px;
        background-color: #AFAFAF;
    }

    #texto {
        font-size: 20px;
        font-family: calibri light;
        Font-Weight: bold;
    }
</style>


    
@if (bomberoView is not null)
{
    <EditForm Model="@bomberoView" OnSubmit="CrearBombero">
        <InputFile OnChange="SubirFoto" />
        <br>
        <br>
        <label id="texto">Nombre:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.Nombre" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Apellido:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.Apellido" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Dotacion:</label>
        <br>
        <InputSelect @bind-Value="bomberoView.Dotacion">
            <option selected value="0">-Seleccione una dotacion-</option>
            <option value="@TipoDotaciones.uno">@TipoDotaciones.uno</option>
            <option value=" @TipoDotaciones.dos">@TipoDotaciones.dos</option>
            <option value=" @TipoDotaciones.tres">@TipoDotaciones.tres</option>
            <option value=" @TipoDotaciones.cuatro">@TipoDotaciones.cuatro</option>
        </InputSelect>
        @*<label id="texto">Brigada:</label>
        <br>
        @if (brigadas is not null && brigadas.Count() > 0)
        {
            <InputSelect @bind-Value="@brigadaView.Nombre">
                <option selected value="0">-Seleccione una brigada-</option>
                @foreach (Brigada b in brigadas)
                {
                    <option value="@b.Nombre">@b.Nombre</option>
                }
            </InputSelect>
        }*@
        <label id="texto">DNI:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.Documento" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Fecha de nacimiento:</label>
        <br>
        <InputDate id="estilo" @bind-Value="bomberoView.FechaNacimiento" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Numero de legajo:</label>
        <br>
        <InputNumber id="estilo" @bind-Value="bomberoView.NumeroLegajo" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Fecha de aceptacion:</label>
        <br>
        <InputDate id="estilo" @bind-Value="bomberoView.FechaAceptacion" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Nº de IOMA:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.NumeroIoma" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Lugar de nacimiento:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.LugarNacimiento" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Grupo sanguineo:</label>
        <br>
        <InputSelect id="estilo" @bind-Value="bomberoView.GrupoSanguineo">
            <option selected value="0">-Seleccione una dotacion-</option>
            <option value="@TipoGrupoSanguineo.ABNegativo">@TipoGrupoSanguineo.ABNegativo</option>
            <option value="@TipoGrupoSanguineo.ABPositivo">@TipoGrupoSanguineo.ABPositivo</option>
            <option value="@TipoGrupoSanguineo.ANegativo">@TipoGrupoSanguineo.ANegativo</option>
            <option value="@TipoGrupoSanguineo.APositivo">@TipoGrupoSanguineo.APositivo</option>
            <option value="@TipoGrupoSanguineo.BNegativo">@TipoGrupoSanguineo.BNegativo</option>
            <option value="@TipoGrupoSanguineo.BPositivo">@TipoGrupoSanguineo.BPositivo</option>
            <option value="@TipoGrupoSanguineo.ONegativo">@TipoGrupoSanguineo.ONegativo</option>
            <option value="@TipoGrupoSanguineo.OPositivo">@TipoGrupoSanguineo.OPositivo</option>
        </InputSelect>
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Observaciones:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.Observaciones" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Profesion:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.Profesion" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Nivel de estudios:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.NivelEstudios" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Resulucion 1:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.Resolucion1" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Resulucion 2:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.Resolucion2" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Resulucion 3:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.Resolucion3" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Resulucion 4:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.Resolucion4" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Resulucion 5:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.Resolucion5" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Resulucion 6:</label>
        <br>
        <InputText id="estilo" @bind-Value="bomberoView.Resolucion6" />
        <BSContainer id="blancoA">

        </BSContainer>
        <InputCheckbox @bind-Value="bomberoView.Chofer" />
        @if (bomberoView.Chofer)
        {
            <label id="texto">Es chofer</label>
            <br>
            <InputDate id="estilo" @bind-Value="bomberoView.VencimientoRegistro" />
        }
        @if (!bomberoView.Chofer)
        {
            <label id="texto">No es chofer</label>
        }
        <BSContainer id="blancoA">

        </BSContainer>
        <InputSelect @bind-Value="bomberoView.Grado" id="estilo">
            <option selected value="0">-Seleccione una Grado-</option>
            <option value=" @EscalafonJerarquico.ComandanteGeneral">Comandante General</option>
            <option value=" @EscalafonJerarquico.ComandanteMayor">Comandante Mayor</option>
            <option value=" @EscalafonJerarquico.Comandante">Comandante</option>
            <option value=" @EscalafonJerarquico.SubComandante">Sub Comandante</option>
            <option value=" @EscalafonJerarquico.OficialAuxiliarDotacion">Oficial Auxiliar De Dotacion</option>
            <option value=" @EscalafonJerarquico.OficialAuxiliarEscuadra">Oficial Auxiliar De Escuadra</option>
            <option value=" @EscalafonJerarquico.OficialAuxiliar">Oficial Auxiliar</option>
            <option value=" @EscalafonJerarquico.SubOficialAyudanteMayor">Sub Oficial Ayudante Mayor</option>
            <option value=" @EscalafonJerarquico.SubOficialAyudantePrincipal">Sub Oficial Ayudante Principal</option>
            <option value=" @EscalafonJerarquico.SubOficialAyudantePrimera">Sub Oficial Ayudante De Primera</option>
            <option value=" @EscalafonJerarquico.SubOficialAyudante">Sub Oficial Ayudante</option>
            <option value=" @EscalafonJerarquico.SuboficialSubAyudante">Sub Oficial Sub Ayudante</option>
            <option value=" @EscalafonJerarquico.SegundoAyudante">2ºdo Ayudante</option>
            <option value=" @EscalafonJerarquico.Bombero">Bombero</option>
            <option value=" @EscalafonJerarquico.Aspirante">Aspirante</option>
        </InputSelect>
        <BSContainer id="blancoA">

        </BSContainer>
        <InputSelect @bind-Value="bomberoView.Estado" id="estilo">
            <option selected value="0">-Seleccione una Estado-</option>
            <option value="@EstadoBombero.Reserva">Reserva</option>
            <option value="@EstadoBombero.ComisionDirectiva">Comision Directiva</option>
            <option value="@EstadoBombero.CuerpoActivo">Cuerpo Activo</option>
        </InputSelect>
        <BSContainer id="blancoA">

        </BSContainer>

        <InputSelect @bind-Value="bomberoView.Sexo">
            <option selected value="0">-Seleccione una Sexo-</option>
            <option value="@TipoSexo.Hombre">Masculino</option>
            <option value="@TipoSexo.Mujer">Femenino</option>
            <option value="@TipoSexo.Otro">Otro</option>
        </InputSelect>
       @* <label id="texto">Telefono celular:</label>
        <br>
        <InputText id="estilo" @bind-Value="contactoView.TelefonoCel" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Telefono fijo:</label>
        <br>
        <InputText id="estilo" @bind-Value="contactoView.TelefonoFijo" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Telefono laboral:</label>
        <br>
        <InputText id="estilo" @bind-Value="contactoView.TelefonoLaboral" />
        <BSContainer id="blancoA">

        </BSContainer>
        <label id="texto">Email:</label>
        <br>
        <InputText id="estilo" @bind-Value="contactoView.Email" />*@

        <BSContainer id="blancoA">

        </BSContainer>
        <button type="submit" id="crear-bombero">Agregar bombero</button>
    </EditForm>
}
    @*
    <BSContainer id="Estilo">
        <BSContainer id="blancoA">

        </BSContainer>
        <BSRow>
            <BSCol Column="2">

            </BSCol>
            <BSCol Column="4">
                <h5 id="encabezado">Bombero</h5>
            </BSCol>
            <BSCol Column="4">
                <h5 id="encabezado">Contacto</h5>
            </BSCol>
            <BSCol Column="2">

            </BSCol>
        </BSRow>

        <EditForm Model="@bomberoView" OnSubmit="CrearBombero">
            <BSRow>
            
                    <BSCol Column="2">

                    </BSCol>
                    <BSCol Column="4">
                
                        @*<InputFile OnChange="SubirFoto" />
                        <br>
                        <br>
                        <label id="texto">Nombre:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.Nombre"  />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Apellido:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.Apellido" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Dotacion:</label>
                        <br>
                        <InputSelect @bind-Value="bomberoView.Dotacion">
                            <option selected value="0">-Seleccione una dotacion-</option>
                            <option value="@TipoDotaciones.uno">@TipoDotaciones.uno</option>
                            <option value=" @TipoDotaciones.dos">@TipoDotaciones.dos</option>
                            <option value=" @TipoDotaciones.tres">@TipoDotaciones.tres</option>
                            <option value=" @TipoDotaciones.cuatro">@TipoDotaciones.cuatro</option>
                        </InputSelect>
                
                            <BSCol Column="4">
                                <InputSelect @bind-Value="bomberoView.Dotacion">
                                    <option selected value="0">-Seleccione una dotacion-</option>
                                    <option value="@TipoDotaciones.uno">1</option>
                                    <option value="@TipoDotaciones.dos">2</option>
                                    <option value="@TipoDotaciones.dos">3</option>
                                    <option value="@TipoDotaciones.dos">4</option>
                                </InputSelect>
                            </BSCol>
                
                        <BSContainer id="blancoA">

                        </BSContainer>
                        @*<label id="texto">Brigada:</label>
                        <br>
                        @if (brigadas is not null && brigadas.Count() > 0)
                        {
                            <InputSelect @bind-Value="@brigadaView.Nombre">
                                <option selected value="0">-Seleccione una brigada-</option>
                                @foreach (Brigada b in brigadas)
                                {
                                    <option value="@b.Nombre">@b.Nombre</option>
                                }
                            </InputSelect>
                        }
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">DNI:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.Documento" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Fecha de nacimiento:</label>
                        <br>
                        <InputDate id="estilo" @bind-Value="bomberoView.FechaNacimiento" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Numero de legajo:</label>
                        <br>
                        <InputNumber id="estilo" @bind-Value="bomberoView.NumeroLegajo" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Fecha de aceptacion:</label>
                        <br>
                        <InputText id="estilo" @bind="bomberoView.FechaAceptacion" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto"> Direccion:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.Direccion" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Nº de IOMA:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.NumeroIoma" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Lugar de nacimiento:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.LugarNacimiento" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Grupo sanguineo:</label>
                        <br>
                        <InputSelect id="estilo" @bind-Value="bomberoView.GrupoSanguineo">
                            <option selected value="0">-Seleccione una dotacion-</option>
                        <option value="@TipoGrupoSanguineo.ABNegativo">@TipoGrupoSanguineo.ABNegativo</option>
                        <option value="@TipoGrupoSanguineo.ABPositivo">@TipoGrupoSanguineo.ABPositivo</option>
                            <option value="@TipoGrupoSanguineo.ANegativo">1</option>
                            <option value="@TipoGrupoSanguineo.APositivo">1</option>
                            <option value="@TipoGrupoSanguineo.BNegativo">1</option>
                            <option value="@TipoGrupoSanguineo.BPositivo">1</option>
                            <option value="@TipoGrupoSanguineo.ONegativo">1</option>
                            <option value="@TipoGrupoSanguineo.OPositivo">1</option>
                        </InputSelect>
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Observaciones:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.Observaciones" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Profesion:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.Profesion" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Nivel de estudios:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.NivelEstudios" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Resulucion 1:</label>
                        <br>
                        <InputText id="estilo" @bind.Value="bomberoView.Resolucion1" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Resulucion 2:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.Resolucion2" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Resulucion 3:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.Resolucion3" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Resulucion 4:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.Resolucion4" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Resulucion 5:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.Resolucion5" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Resulucion 6:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="bomberoView.Resolucion6" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <InputCheckbox @bind-Value="bomberoView.Chofer" />
                        @if (bomberoView.Chofer)
                        {
                        <label id="texto">Es chofer</label>
                        <br>
                        <InputDate id="estilo" @bind-Value="bomberoView.VencimientoRegistro" />
                        }
                        @if (!bomberoView.Chofer)
                        {
                        <label id="texto">No es chofer</label>
                        }
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <InputSelect @bind-Value="bomberoView.Grado" >
                            <option value=" @EscalafonJerarquico.ComandanteGeneral">Comandante General</option>
                            <option value=" @EscalafonJerarquico.ComandanteMayor">Comandante Mayor</option>
                            <option value=" @EscalafonJerarquico.Comandante">Comandante</option>
                            <option value=" @EscalafonJerarquico.SubComandante">Sub Comandante</option>
                            <option value=" @EscalafonJerarquico.OficialAuxiliarDotacion">Oficial Auxiliar De Dotacion</option>
                            <option value=" @EscalafonJerarquico.OficialAuxiliarEscuadra">Oficial Auxiliar De Escuadra</option>
                            <option value=" @EscalafonJerarquico.OficialAuxiliar">Oficial Auxiliar</option>
                            <option value=" @EscalafonJerarquico.SubOficialAyudanteMayor">Sub Oficial Ayudante Mayor</option>
                            <option value=" @EscalafonJerarquico.SubOficialAyudantePrincipal">Sub Oficial Ayudante Principal</option>
                            <option value=" @EscalafonJerarquico.SubOficialAyudantePrimera">Sub Oficial Ayudante De Primera</option>
                            <option value=" @EscalafonJerarquico.SubOficialAyudante">Sub Oficial Ayudante</option>
                            <option value=" @EscalafonJerarquico.SuboficialSubAyudante">Sub Oficial Sub Ayudante</option>
                            <option value=" @EscalafonJerarquico.SegundoAyudante">2ºdo Ayudante</option>
                            <option value=" @EscalafonJerarquico.Bombero">Bombero</option>
                            <option value=" @EscalafonJerarquico.Aspirante">Aspirante</option>
                        </InputSelect>
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <InputSelect @bind-Value="bomberoView.Estado">
                            <option value="@EstadoBombero.Reserva">Reserva</option>
                            <option value="@EstadoBombero.ComisionDirectiva">Comision Directiva</option>
                            <option value="@EstadoBombero.CuerpoActivo">Cuerpo Activo</option>
                        </InputSelect>
                        <BSContainer id="blancoA">

                        </BSContainer>

                        <InputSelect @bind-Value="bomberoView.Sexo">
                            <option value="@TipoSexo.Hombre">Masculino</option>
                            <option value="@TipoSexo.Mujer">Femenino</option>
                            <option value="@TipoSexo.Otro">Otro</option>
                        </InputSelect>
                        <BSContainer id="blancoA">

                        </BSContainer>
                    </BSCol>
                    <BSCol Column="4">
                       @* <label id="texto">Telefono celular:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="contactoView.TelefonoCel" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Telefono fijo:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="contactoView.TelefonoFijo" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Telefono laboral:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="contactoView.TelefonoLaboral" />
                        <BSContainer id="blancoA">

                        </BSContainer>
                        <label id="texto">Email:</label>
                        <br>
                        <InputText id="estilo" @bind-Value="contactoView.Email" />

                        <BSContainer id="blancoA">

                        </BSContainer>
                        <button type="submit" id="crear-bombero" >Agregar bombero</button>

                    </BSCol>
                    <BSCol Column="2">

                    </BSCol>
        

            </BSRow>
        </EditForm>
    </BSContainer>
    
}*@
<BSContainer id="blancoA">

</BSContainer>

@code {
    [Parameter]
    public int? BomberoId { get; set; }

    public class BomberosViewModel
    {
        public DateTime FechaNacimiento { get; set; }
        public DateTime FechaAceptacion { get; set; }
        [Required, StringLength(255)]
        public string Nombre { get; set; }
        [Required, StringLength(255)]
        public string Apellido { get; set; }
        public EstadoBombero Estado { get; set; }
        public int NumeroLegajo { get; set; }
        public EscalafonJerarquico Grado { get; set; }
        public TipoDotaciones Dotacion { get; set; }
        [Required, StringLength(255)]
        public string Brigada { get; set; }
        public bool Chofer { get; set; }
        public DateTime? VencimientoRegistro { get; set; }
        public TipoSexo Sexo { get; set; }
        [Required, StringLength(255)]
        public string Direccion { get; set; }
        [Required, StringLength(255)]
        public string LugarNacimiento { get; set; }
        [Required, StringLength(255)]
        public string Documento { get; set; }
        [Required, StringLength(255)]
        public TipoGrupoSanguineo GrupoSanguineo { get; set; }
        [Required, StringLength(255)]
        public string Observaciones { get; set; }
        [Required, StringLength(255)]
        public string Profesion { get; set; }
        [Required, StringLength(255)]
        public string NivelEstudios { get; set; }
        [Required, StringLength(255)]
        public string NumeroIoma { get; set; }
        [Required, StringLength(255)]
        public string? Resolucion1 { get; set; }
        [Required, StringLength(255)]
        public string? Resolucion2 { get; set; }
        [Required, StringLength(255)]
        public string? Resolucion3 { get; set; }
        [Required, StringLength(255)]
        public string? Resolucion4 { get; set; }
        [Required, StringLength(255)]
        public string? Resolucion5 { get; set; }
        [Required, StringLength(255)]
        public string? Resolucion6 { get; set; }
    }
    public class ContactoViewModel
    {
        [Required, StringLength(255)]
        public string? TelefonoCel { get; set; }
        [Required, StringLength(255)]
        public string? TelefonoLaboral { get; set; }
        [Required, StringLength(255)]
        public string? TelefonoFijo { get; set; }
        [Required, StringLength(255)]
        public string? Email { get; set; }
    }
    public class ImagenViewModel
    {
        public string Base64 { get; set; }
        [Required, StringLength(255)]
        public string TipoImagen { get; set; }
        [Required, StringLength(255)]
        public string Nombre { get; set; }
    }
    public class BrigadaViewModel
    {
        public string Nombre { get; set; }
    }

    public ImagenViewModel imagenView { get; set; } = new();
    public BomberosViewModel bomberoView { get; set; } = new();
    public ContactoViewModel contactoView { get; set; } = new();
    public BrigadaViewModel brigadaView { get; set; } = new();
    public Bombero[]? bomberos;
    public Brigada[]? brigadas;
    public bool existe;

    protected override async Task OnInitializedAsync()
    {
        using var db = DbFactory.CreateDbContext();

        brigadas = await db.Brigadas.ToArrayAsync();
    }

    private async void SubirFoto(InputFileChangeEventArgs e)
    {
        string imagenBase64 = await Base64Helper.StreamToBase64(e.File.OpenReadStream());

        imagenView.Base64 = imagenBase64;
        imagenView.TipoImagen = e.File.ContentType;
        imagenView.Nombre = e.File.Name;
    }

    public async void CrearBombero()
    {
        using var db = DbFactory.CreateDbContext();

        if (bomberoView is not null)
        {
            Bombero? comprobante = await db.Bomberos.Where(m => m.NumeroLegajo == bomberoView.NumeroLegajo).SingleOrDefaultAsync();

            if (comprobante is null)
            {
                Bombero bombero = new Bombero()
                    {
                        FechaNacimiento = bomberoView.FechaNacimiento,
                        Sexo = bomberoView.Sexo,
                        Nombre = bomberoView.Nombre,
                        Apellido = bomberoView.Apellido,
                        Documento = bomberoView.Documento,
                        NumeroLegajo = bomberoView.NumeroLegajo,
                        NumeroIoma = bomberoView.NumeroIoma,
                        LugarNacimiento = bomberoView.LugarNacimiento,
                        Grado = bomberoView.Grado,
                        Imagen = new()
                        {
                            NombreImagen = imagenView.Nombre,
                            TipoImagen = imagenView.TipoImagen,
                            Base64Imagen = imagenView.Base64
                        },
                        Dotacion = bomberoView.Dotacion,
                        Brigada = new()
                        {
                            Nombre = brigadaView.Nombre
                        },
                        Resolucion1 = bomberoView.Resolucion1,
                        Resolucion2 = bomberoView.Resolucion2,
                        Resolucion3 = bomberoView.Resolucion3,
                        Resolucion4 = bomberoView.Resolucion4,
                        Resolucion5 = bomberoView.Resolucion5,
                        Resolucion6 = bomberoView.Resolucion6,
                        GrupoSanguineo = bomberoView.GrupoSanguineo,
                        Estado = bomberoView.Estado,
                        Chofer = bomberoView.Chofer,
                        VencimientoRegistro = bomberoView.VencimientoRegistro,
                        Direccion = bomberoView.Direccion,
                        Observaciones = bomberoView.Observaciones,
                        Profesion = bomberoView.Profesion,
                        NivelEstudios = bomberoView.NivelEstudios,
                        FechaAceptacion = bomberoView.FechaAceptacion,
                        Contacto = new()
                        {
                            TelefonoCel = contactoView.TelefonoCel,
                            TelefonoFijo = contactoView.TelefonoFijo,
                            TelefonoLaboral = contactoView.TelefonoLaboral,
                            Email = contactoView.Email
                        }
                    };

                db.Bomberos.Add(bombero);
                await db.SaveChangesAsync();
                contactoView = new();
                imagenView = new();
                brigadaView = new();
                bomberoView = new();
                StateHasChanged();
            }
        }
    }
}