@using Microsoft.EntityFrameworkCore.Metadata.Internal;
@using Vista.Helpers;
@inject NavigationManager navigationManager
@page "/"

<div class="dashboard-container">
    @*Banner Section*@
    <Row Class="banner-section">
        <Col Span="24">
        <Card Bordered="false" Class="banner-card">
            <img src="imagenes/bombeross.jpg" class="banner-image" alt="Banner Bomberos" />
            <div class="banner-overlay">
                <h1>SISTEMA DE GESTIÓN DE BOMBEROS</h1>
            </div>
        </Card>
        </Col>
    </Row>

    @*Main Grid Section*@
    <Row Gutter="24" Class="dashboard-grid">

        @*Legajo Section*@
        <Col Xs="24" Sm="12" Lg="8">
        <div @onclick="@(() => { navigationManager.NavigateTo("/Bomberos/Legajo"); })" style="cursor: pointer;">
            <Card Class="dashboard-card legajo-card">
                <i class="fa-solid fa-user card-icon"></i>
                <h2>Legajo</h2>
                <p>Visite su legajo personal</p>
            </Card>
        </div>
        </Col>

        @*Licencias Section*@
        <Col Xs="24" Sm="12" Lg="8">
        <div @onclick="@(() => { navigationManager.NavigateTo("/Licencias-Detalles"); })" style="cursor: pointer;">
            <Card Class="dashboard-card licencias-card">
                <i class="fa-solid fa-file-signature card-icon"></i>
                <h2>Licencias</h2>
                <p>Gestión de licencias</p>
            </Card>
        </div>
        </Col>

        @*Salidas Section*@
        <Col Xs="24" Sm="12" Lg="8">
        <Card Class="dashboard-card salidas-card">
            <i class="fa-solid fa-door-open card-icon"></i>
            <h2>Salidas</h2>
            <Dropdown Visible="@isOpen" OnVisibleChange="@(visible => isOpen = visible)">
                <Overlay>
                    <Menu Class="salidas-menu">
                        <MenuItemGroup Title="Tipos de Salidas">
                            <MenuItem @onclick="@(() => { navigationManager.NavigateTo("/salidas/factores-climaticos"); })">
                                <i class="fa-solid fa-cloud-sun-rain menu-icon"></i>
                                <span>Factores Climáticos</span>
                            </MenuItem>
                            <MenuItem @onclick="@(() => { navigationManager.NavigateTo("/salidas/materiales-peligrosos"); })">
                                <i class="fa-solid fa-triangle-exclamation menu-icon"></i>
                                <span>Materiales Peligrosos</span>
                            </MenuItem>
                            <MenuItem @onclick="@(() => { navigationManager.NavigateTo("/salidas/accidentes"); })">
                                <i class="fa-solid fa-car-crash menu-icon"></i>
                                <span>Accidente</span>
                            </MenuItem>
                            <SubMenu Title="Incendios">
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/incendios-MaquinasAgricola"); })">
                                        <i class="fa-solid fa-tractor menu-icon"></i>
                                        <span>Máquina Agrícola</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/incendios-Aereonaves"); })">
                                        <i class="fa-solid fa-plane menu-icon"></i>
                                        <span>Aeronave</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/incendios-comercio"); })">
                                        <i class="fa-solid fa-store menu-icon"></i>
                                        <span>Comercio</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/incendios-establecimientoEducativo"); })">
                                        <i class="fa-solid fa-school menu-icon"></i>
                                        <span>Establecimiento Educativo</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/incendios-forestales"); })">
                                        <i class="fa-solid fa-tree menu-icon"></i>
                                        <span>Forestal</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/incendios-industriales"); })">
                                        <i class="fa-solid fa-industry menu-icon"></i>
                                        <span>Industrial</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/incendios-vehiculares"); })">
                                        <i class="fa-solid fa-car menu-icon"></i>
                                        <span>Vehicular</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/incendios-HospitalesClinicas"); })">
                                        <i class="fa-solid fa-hospital menu-icon"></i>
                                        <span>Hospital/Clínica</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/incendios-establecimientoPublico"); })">
                                        <i class="fa-solid fa-building menu-icon"></i>
                                        <span>Establecimiento Público</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/incendios-viviendas"); })">
                                        <i class="fa-solid fa-house menu-icon"></i>
                                        <span>Vivienda</span>
                                    </Button>
                                </MenuItem>
                            </SubMenu>
                            <SubMenu Title="Servicios Especiales">
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/serviciosRepresentacion"); })">
                                        <i class="fa-solid fa-people-arrows menu-icon"></i>
                                        <span>Representación</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/serviciosPrevencion"); })">
                                        <i class="fa-solid fa-shield-alt menu-icon"></i>
                                        <span>Prevención</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/serviciosSuministroAgua"); })">
                                        <i class="fa-solid fa-water menu-icon"></i>
                                        <span>Suministro de Agua</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/serviciosColaboraciónFuerzasSeguridad"); })">
                                        <i class="fa-solid fa-handshake menu-icon"></i>
                                        <span>Colaboración con Fuerzas de Seguridad</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/serviciosColocaciónDriza"); })">
                                        <i class="fa-solid fa-anchor menu-icon"></i>
                                        <span>Colocación de Driza</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/serviciosCapacitacion"); })">
                                        <i class="fa-solid fa-chalkboard-teacher menu-icon"></i>
                                        <span>Capacitación</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/serviciosFalsaAlarmas"); })">
                                        <i class="fa-solid fa-exclamation-triangle menu-icon"></i>
                                        <span>Falsa Alarma</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/serviciosRetiradoDeObito"); })">
                                        <i class="fa-solid fa-procedures menu-icon"></i>
                                        <span>Retirado de Óbito</span>
                                    </Button>
                                </MenuItem>
                            </SubMenu>
                            <SubMenu Title="Rescates">
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/rescates-persona"); })">
                                        <i class="fa-solid fa-user menu-icon"></i>
                                        <span>Persona</span>
                                    </Button>
                                </MenuItem>
                                <MenuItem>
                                    <Button Class="menu-button" @onclick="@(() => { navigationManager.NavigateTo("/salidas/rescates-animal"); })">
                                        <i class="fa-solid fa-paw menu-icon"></i>
                                        <span>Animal</span>
                                    </Button>
                                </MenuItem>
                            </SubMenu>
                        </MenuItemGroup>
                    </Menu>
                </Overlay>
                <ChildContent>
                    <Button Type="primary" Class="salidas-button">
                        Cargar Salidas <i class="fa-solid fa-arrow-down"></i>
                    </Button>
                </ChildContent>
            </Dropdown>
        </Card>
        </Col>

        @* Personal/Bomberos Section *@
        <Col Xs="24" Sm="12" Lg="8">
        <div @onclick="@(() => { navigationManager.NavigateTo("/bomberos"); })" style="cursor: pointer;">
            <Card Class="dashboard-card personal-card">
                <i class="fa-solid fa-people-group card-icon"></i>
                <h2>PERSONAL</h2>
                <p>Ver el personal</p>
            </Card>
        </div>
        </Col>


        @* Unidades Section *@
        <Col Xs="24" Sm="12" Lg="8">
        <div @onclick="@(() => { navigationManager.NavigateTo("/unidades"); })" style="cursor: pointer;">
            <Card Class="dashboard-card unidades-card">
                <i class="fa-solid fa-truck card-icon"></i>
                <h2>UNIDADES</h2>
                <p>Ver las unidades</p>
            </Card>
        </div>
        </Col>

        @* Firmas Section *@
        <Col Xs="24" Sm="12" Lg="8">
        <div @onclick="@(() => { navigationManager.NavigateTo("/incidentes-vehiculos"); })" style="cursor: pointer;">
            <Card Class="dashboard-card firmas-card">
                <i class="fa-solid fa-scroll card-icon"></i>
                <h2>FIRMAS</h2>
                <p>Ver firmas</p>
            </Card>
        </div>
        </Col>

        @* Reportes Section *@
        <Col Xs="24" Sm="12" Lg="8">
        <Card Class="dashboard-card reportes-card">
            <h2>REPORTES</h2>
            <div class="btnContA5">
                <Popover ContentTemplate="@rpt5a" Placement="@Placement.Bottom" Trigger="@(new AntDesign.Trigger[] { AntDesign.Trigger.Hover})">
                    <button @onclick="@(() => { navigationManager.NavigateTo("/Reportes/HistorialSalidas"); })">
                        <i class="fa-solid fa-clock-rotate-left"></i>
                    </button>
                </Popover>
                <Popover ContentTemplate="@rpt5b" Placement="@Placement.Bottom" Trigger="@(new AntDesign.Trigger[] { AntDesign.Trigger.Hover})">
                    <button @onclick="@(() => { navigationManager.NavigateTo("/Reportes/HistorialBomberos"); })">
                        <i class="fa-solid fa-user-clock"></i>
                    </button>
                </Popover>
                <Popover ContentTemplate="@rpt5c" Placement="@Placement.Bottom" Trigger="@(new AntDesign.Trigger[] { AntDesign.Trigger.Hover})">
                    <button @onclick="@(() => { navigationManager.NavigateTo("/Reportes/Reportes_Choferes"); })">
                        <i class="fa-solid fa-id-card"></i>
                    </button>
                </Popover>
                <Popover ContentTemplate="@rpt5d" Placement="@Placement.Bottom" Trigger="@(new AntDesign.Trigger[] { AntDesign.Trigger.Hover})">
                    <button @onclick="@(() => { navigationManager.NavigateTo("/Reportes/HistorialMoviles"); })">
                        <img src="imagenes/icons/fire_truck.svg"
                             alt="Camión de Bomberos"
                             style="width: 1.5em; height: 1.5em; vertical-align: middle; filter: invert(0) sepia(0) saturate(0) hue-rotate(0deg) brightness(0) contrast(1);" />
                    </button>
                </Popover>
            </div>
        </Card>
        </Col>

        @* Departamentos Section *@
        <Col Xs="24" Sm="12" Lg="8">
        <Card Class="dashboard-card departamentos-card">
            <h2 style="color: white;">DEPARTAMENTOS</h2>
            <div style="display: flex; padding-left:1.46%; align-items: center; justify-content: space-evenly; width: 100%; height: 100%;">
                <Button Type="link" @onclick="@(() => { navigationManager.NavigateTo("/Herramientas/Brigadas"); })">
                    <i class="fa-solid fa-users"></i>
                </Button>
                <Button Type="link" @onclick="@(() => { navigationManager.NavigateTo("/Herramientas/Comunicacion"); })">
                    <i class="fa-solid fa-walkie-talkie"></i>
                </Button>
                <Button Type="link" @onclick="@(() => { navigationManager.NavigateTo("/Herramientas/Deposito"); })">
                    <i class="fa-solid fa-warehouse"></i>
                </Button>
            </div>
        </Card>
        </Col>


        @* Ética Section *@
        <Col Xs="24" Sm="12" Lg="8">
        <Card Class="dashboard-card etica-card">
            <h2>ÉTICA</h2>
            <div style="gap: 10px; justify-content: center; display: flex; margin-top: 3% !important;">
                <Button Type="link" @onclick="@(() => { navigationManager.NavigateTo("/bomberos/sancionados"); })">
                    <i class="fa-solid fa-user-xmark"></i>
                </Button>
                <Button Type="link" @onclick="@(() => { navigationManager.NavigateTo("/bomberos/ascenso"); })">
                    <i class="fa-solid fa-user-plus"></i>
                </Button>
            </div>
        </Card>
        </Col>
    </Row>
</div>

@code {
    private bool isOpen;
    private bool showIncendios;
    private bool showServicios;
    private bool showRescates;

    private void ToggleDropdown() => isOpen = !isOpen;

    private void toggleMenu(string menu)
    {
        switch (menu)
        {
            case "incendios":
                showIncendios = !showIncendios;
                showServicios = showRescates = false;
                break;
            case "servicios":
                showServicios = !showServicios;
                showIncendios = showRescates = false;
                break;
            case "rescates":
                showRescates = !showRescates;
                showIncendios = showServicios = false;
                break;
        }
    }

    // Reportes Section
    private RenderFragment rpt5a =
    @<div>
        <p>Salidas</p>
    </div>;
    private RenderFragment rpt5b =
    @<div>
        <p>Bomberos</p>
    </div>;
    private RenderFragment rpt5c =
    @<div>
        <p>Choferes</p>
    </div>;
    private RenderFragment rpt5d =
    @<div>
        <p>Moviles</p>
    </div>;
}