@inject NavigationManager navigationManager
@inject IDbContextFactory<BomberosDbContext> DbFactory
@page "/salidas/materiales-peligrosos"
@using System.ComponentModel.DataAnnotations;
@using System.Text.Json;
@using Vista.Data.ViewModels.MaterialesPeligrosos;
@using Vista.Data.ViewModels.Personal;

<Form  Model="@modelMateriales"
      LabelColSpan="8"
      WrapperColSpan="16"
      OnFinish="OnFinish"
      OnFinishFailed="OnFinishFailed">
    @*Datos generales de las salidas*@
    <FormItem Label="Numero de parte">
        <AntDesign.InputNumber @bind-Value="modelMateriales.NumeroParte" />
    </FormItem>
    <FormItem Label="Dato Hora salida">
        <DatePicker TValue="DateTime" ShowTime="@true" OnChange="OnChange" @bind-Value="@modelMateriales.HoraSalida" />
    </FormItem>
    <FormItem Label="Dato Hora llegada">
        <DatePicker TValue="DateTime" ShowTime="@true" OnChange="OnChange" @bind-Value="@modelMateriales.HoraLLegada" />
    </FormItem>
    <FormItem Label="Kilometor llegada">
        <AntDesign.InputNumber  @bind-Value="modelMateriales.KmSalida" />
    </FormItem>
    <FormItem Label="Kilometor llegada">
        <AntDesign.InputNumber @bind-Value="modelMateriales.KmLlegada" />
    </FormItem>
    <FormItem Label="Calle/Ruta">
        <Input @bind-Value="@modelMateriales.CalleORuta" />
    </FormItem>
    <FormItem Label="Numero/kilometro">
        <Input @bind-Value="@modelMateriales.NumeroOKilometro" />
    </FormItem>
    <FormItem Label="Entre calles">
        <Input @bind-Value="@modelMateriales.EntreCalles" />
    </FormItem>
    <FormItem Label="PisoNumero">
        <Input @bind-Value="@modelMateriales.PisoNumero" />
    </FormItem>
    <FormItem Label="Depto">
        <Input @bind-Value="@modelMateriales.Depto" />
    </FormItem>
    <FormItem Label="Tipo zona">
        <EnumSelect TEnum="TipoZona" @bind-Value="@modelMateriales.TipoZona" />
    </FormItem>
    @*Solicitante datos*@
    <b><label>Datos de solicitante</label></b>
    <FormItem Label="Nombre del solicitante">
        <Input @bind-Value="@modelMateriales.NombreSolicitante" />
    </FormItem>
    <FormItem Label="Apelldio del solicitante">
         <Input @bind-Value="@modelMateriales.ApellidoSolicitante" />
    </FormItem>
    <FormItem Label="documneto del solicitante">
         <Input @bind-Value="@modelMateriales.DniSolicitante" />
    </FormItem>
    <FormItem Label="Telefono  del solicitante">
         <Input @bind-Value="@modelMateriales.TelefonoSolicitante" />
    </FormItem>
    @*Datos bomberos receptor*@
    <FormItem Label="Nombre del receptor">
        <Input @bind-Value="@modelMateriales.NombreReceptor" />
    </FormItem>
    <FormItem Label="apellido del recepetor">
        <Input @bind-Value="@modelMateriales.ApellidoReceptor" />
    </FormItem>
    <FormItem Label="Numero legajo">
        <AntDesign.InputNumber @bind-Value="modelMateriales.LegajoReceptor" />
    </FormItem>

    @*Datos de damnificados*@
    <FormItem Label="¿Ubo damnificados?">
        <Switch @bind-Checked="switchValue" />
    </FormItem>
    @if (switchValue == true)
    {
        <FormItem Label="Nombre">
            <Input @bind-Value="@damnificado.Nombre" />
        </FormItem>
         <FormItem Label="Apellido">
            <Input @bind-Value="@damnificado.Apellido" />
        </FormItem>
        <FormItem Label="Documento">
            <Input @bind-Value="@damnificado.Dni" />
        </FormItem>
        <FormItem Label="Tipo material">
            <EnumSelect TEnum="TipoSexo" @bind-Value="@damnificado.Sexo" />
        </FormItem>
    }

   @*propio de la salida de tipo material*@
    <FormItem Label="Tipo material">
        <EnumSelect TEnum="TipoMaterialPeligroso" @bind-Value="@modelMateriales.Tipo" />
    </FormItem>
  
    <FormItem Label="Cuerpo Parteticipantes">
        <Input @bind-Value="@modelMateriales.CuerpoParticipante" />
    </FormItem>
    <FormItem Label="Tipo material">
        <Input @bind-Value="@modelMateriales.Descripcion" />
    </FormItem>
    <FormItem WrapperColOffset="8" WrapperColSpan="16">
        <Input @bind-Value="@modelMateriales.Descripcion" />
    </FormItem>





    <FormItem WrapperColOffset="8" WrapperColSpan="16">
        <Button Type="@ButtonType.Primary" HtmlType="submit">
            Submit
        </Button>
    </FormItem>
</Form>

@code
{

    private DamnificadoViewModels damnificado = new();
    private MaterialPeligrosoViewModels modelMateriales = new ();
    bool switchValue { get; set; }


    private void OnFinish(EditContext editContext)
    {
        Console.WriteLine($"Success:{JsonSerializer.Serialize(modelMateriales)}");
    }

    private void OnFinishFailed(EditContext editContext)
    {
        Console.WriteLine($"Failed:{JsonSerializer.Serialize(modelMateriales)}");
    }
    private void OnChange(DateTimeChangedEventArgs args)
    {
        Console.WriteLine($"Selected Time: {args.Date}");
        Console.WriteLine($"Formatted Selected Time: {args.DateString}");
    }
   

    
}

