@using Vista.Data.ViewModels;
@using Vista.Data.ViewModels.Personal;
@using Vista.Data.Models.Salidas;
@using Vista.Data.Enums.Salidas;
@using Vista.Data.Models.Personas;
@using System.Linq;

@*Servicios utilizados*@
@inject IMessageService MessageService

<style>
    .participantes {
        border: 2px solid #52c41a;
        background: #f6ffed;
        box-shadow: 0 2px 8px rgba(82,196,26,0.08);
        border-radius: 10px;
        margin-bottom: 2rem;
        padding: 2rem 1.5rem;
    }
</style>

<div class="participantes">
    <Form Model="Model"
          ValidateOnChange="@true">
        @*Sección Solicitante*@
        <div style="margin-bottom: 24px;">
            <div style="border-bottom: 2px solid #52c41a; padding-bottom: 8px; margin-bottom: 16px;">
                <h4 style="color: #52c41a; margin: 0; font-weight: 600;">Datos del Solicitante</h4>
            </div>

            <Row Gutter="16">
                <AntDesign.Col Span="12">
                    <FormItem Label="Nombre">
                        <Input @bind-Value="@Model.NombreSolicitante"
                               Placeholder="Ingrese el nombre" />
                    </FormItem>
                </AntDesign.Col>
                <AntDesign.Col Span="12">
                    <FormItem Label="Apellido">
                        <Input @bind-Value="@Model.ApellidoSolicitante"
                               Placeholder="Ingrese el apellido" />
                    </FormItem>
                </AntDesign.Col>
            </Row>

            <Row Gutter="16">
                <AntDesign.Col Span="12">
                    <FormItem Label="Documento">
                        <Input @bind-Value="@Model.DniSolicitante"
                               Placeholder="Número de documento" />
                    </FormItem>
                </AntDesign.Col>
                <AntDesign.Col Span="12">
                    <FormItem Label="Teléfono">
                        <Input @bind-Value="@Model.TelefonoSolicitante"
                               Placeholder="Número de teléfono" />
                    </FormItem>
                </AntDesign.Col>
            </Row>
        </div>

        @*Sección Receptor*@
        <div style="margin-bottom: 24px;">
            <div style="border-bottom: 2px solid #52c41a; padding-bottom: 8px; margin-bottom: 16px;">
                <h4 style="color: #52c41a; margin: 0; font-weight: 600;">Datos del Recepcionista</h4>
            </div>

            <Row Gutter="16">

                <AntDesign.Col Span="24">
                    <FormItem Label="Tipo">
                        <EnumSelect TEnum="TipoReceptoria" @bind-Value="@Model.TipoReceptoria" DefaultActiveFirstOption="false" />
                    </FormItem>
                </AntDesign.Col>

                @if (TipoReceptoria.Bombero == Model.TipoReceptoria)
                {
                    <AntDesign.Col Span="24">
                        <FormItem Label="Ingrese el bombero receptor">
                            <Select Value="@Model.BomberoReceptor"
                                    Placeholder="Seleccione un bombero"
                                    TItemValue="int?"
                                    TItem="BomberoViweModel"
                                    ValueName="@nameof(BomberoViweModel.Id)"
                                    LabelName="@nameof(BomberoViweModel.ApellidoYNombre)"
                                    DataSource="@BomberosTodos"
                                    DefaultActiveFirstOption="false"
                                    AllowClear="true" EnableSearch />
                        </FormItem>
                    </AntDesign.Col>
                }
                else
                {
                    <AntDesign.Col Span="12">
                        <FormItem Label="Nombre">
                            <Input @bind-Value="@Model.NombreReceptor"
                                   Placeholder="Ingrese el nombre" />
                        </FormItem>
                    </AntDesign.Col>

                    <AntDesign.Col Span="12">
                        <FormItem Label="Apellido">
                            <Input @bind-Value="@Model.ApellidoReceptor"
                                   Placeholder="Ingrese el apellido" />
                        </FormItem>
                    </AntDesign.Col>
                }
            </Row>
        </div>
    </Form>
</div>

@code {
    [Parameter] public required SalidasViewModels Model { get; set; }
    [Parameter] public required List<BomberoViweModel> BomberosTodos { get; set; }
}